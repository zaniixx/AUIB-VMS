<header class="header">
  <div class="header__inner">
    <!-- Logo -->
    <a href="{{ url_for('auth.home_page') }}" class="header__logo">
      <i class="fas fa-users" style="width: 2rem; height: 2rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem; font-size: 2rem;"></i>
      <span style="display: inline-block; vertical-align: middle;">
        <span style="display: block; font-size: var(--text-lg); font-weight: var(--font-bold);">AUIB VMS</span>
        <span style="display: block; font-size: var(--text-xs); color: var(--color-gray-600);">Volunteer Management System</span>
      </span>
    </a>



    <!-- Actions (Auth + Admin Preview) -->
    <div class="header__actions">
      {% if current_user.is_authenticated %}
        {# Admin-only preview controls: visible to admins (current_user.role) only #}
        {% if current_user.role == 'admin' %}
          <div style="display: flex; align-items: center; gap: var(--space-2);">
            {% if is_viewing_as %}
              <form method="post" action="{{ url_for('admin.stop_view_as') }}" style="margin: 0;">
                <button type="submit" class="btn btn--warning btn--sm">
                  Stop Viewing as {{ view_as_role }}
                </button>
              </form>
            {% else %}
              <form method="post" action="{{ url_for('admin.view_as') }}" style="display: flex; align-items: center; gap: var(--space-2); margin: 0;">
                <label for="view_as_role" class="sr-only">Preview as role</label>
                <select id="view_as_role" name="role" class="form-select" style="font-size: var(--text-sm); padding: var(--space-2) var(--space-3); width: auto;">
                  <option value="student">Student</option>
                  <option value="officer">Officer</option>
                  <option value="club_leader">Club Leader</option>
                  <option value="admin">Admin</option>
                </select>
                <button type="submit" class="btn btn--outline btn--sm">Preview</button>
              </form>
            {% endif %}
          </div>
        {% endif %}

        <!-- User Info & Logout -->
        <div style="display: flex; align-items: center; gap: var(--space-3);">
          <span class="badge badge--primary" style="font-size: var(--text-sm);">
            {{ current_user.email }} ({{ current_user.role }})
          </span>
          <a href="{{ url_for('auth.logout') }}" class="btn btn--ghost btn--sm">Logout</a>
        </div>
      {% else %}
        <a href="{{ url_for('auth.login') }}" class="btn btn--outline btn--sm">Login</a>
        <a href="{{ url_for('auth.register') }}" class="btn btn--primary btn--sm">Register</a>
      {% endif %}
    </div>
  </div>
</header>
