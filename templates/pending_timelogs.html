{% extends 'base.html' %}
{% import '_macros.html' as ui %}

{% block title %}Pending Hour Submissions{% endblock %}

{% block body %}
<div class="content-wrapper">
  <div style="margin-bottom: var(--space-8);">
    <h1 style="margin-bottom: var(--space-2);">Pending Hour Submissions</h1>
    <p style="color: var(--color-gray-600);">
      Review and approve volunteer hour submissions from completed events.
    </p>
  </div>

  {% if timelogs %}
    {% call ui.table_wrapper() %}
      <thead>
        <tr>
          <th>Volunteer</th>
          <th>Event</th>
          <th>Start Time</th>
          <th>Stop Time</th>
          <th>Hours</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {%- for t in timelogs %}
        <tr>
          <td>
            <div style="font-weight: var(--font-medium);">{{ t.student_email }}</div>
          </td>
          <td>
            <div style="font-size: var(--text-sm); color: var(--color-gray-600);">
              {{ t.event_name }}
              {% if t.marker %}
              <br>
              <span style="font-size: var(--text-xs); color: var(--color-gray-500);">{{ t.marker }}</span>
              {% endif %}
            </div>
          </td>
          <td>
            <div style="font-size: var(--text-sm);">
              {{ t.start_ts | format_datetime }}
            </div>
          </td>
          <td>
            <div style="font-size: var(--text-sm);">
              {{ t.stop_ts | format_datetime }}
            </div>
          </td>
          <td>
            <div style="font-weight: var(--font-medium);">
              {{ t.calculated_hours if t.calculated_hours else 'â€”' }}
            </div>
          </td>
          <td>
            {{ ui.status_badge(t.status) }}
          </td>
          <td>
            <div style="display: flex; gap: var(--space-2);">
              <form method="post" style="display: inline;">
                <input type="hidden" name="id" value="{{ t.id }}" />
                <button type="submit"
                        name="action"
                        value="approve"
                        class="btn btn--success btn--sm"
                        data-confirm="Approve this timelog submission for {{ t.student_email }}?">
                  <svg style="width: 1rem; height: 1rem;" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  Approve
                </button>
              </form>
              <form method="post" style="display: inline;">
                <input type="hidden" name="id" value="{{ t.id }}" />
                <button type="submit"
                        name="action"
                        value="reject"
                        class="btn btn--danger btn--sm"
                        data-confirm="Reject this timelog submission for {{ t.student_email }}?">
                  <svg style="width: 1rem; height: 1rem;" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                  </svg>
                  Reject
                </button>
              </form>
            </div>
          </td>
        </tr>
        {%- endfor %}
      </tbody>
    {% endcall %}
  {% else %}
    {% call ui.card(title='No Pending Submissions') %}
      {{ ui.empty_state(
        'All Caught Up!',
        'There are no pending volunteer hour submissions to review at this time.'
      ) }}
    {% endcall %}
  {% endif %}
</div>
{% endblock %}
